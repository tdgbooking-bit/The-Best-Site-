<!DOCTYPE html>
<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Claim Product â€” SUBLIMINAL WORLD</title>

<style>
body{
background:#111;
color:#fff;
font-family:'Playfair Display', serif;
margin:0;
}

/* NAVBAR */
.main-navbar{
background:#000;
padding:18px;
text-align:center;
position:sticky;
top:0;
z-index:100;
}

.main-navbar a{
color:#fff;
text-decoration:none;
margin:0 15px;
letter-spacing:2px;
}

/* CONTAINER */
.claim-container{
background:#222;
padding:40px 30px;
border-radius:10px;
max-width:400px;
margin:80px auto;
text-align:center;
}

input{
width:100%;
padding:10px;
margin:10px 0;
border:none;
border-radius:4px;
background:#111;
color:white;
}

button{
width:100%;
padding:12px;
margin-top:10px;
background:white;
color:black;
border:none;
cursor:pointer;
font-weight:bold;
}

button:hover{
background:#333;
color:#fff;
}

.success-msg{color:#0f0;margin-top:15px;}
.error-msg{color:#f55;margin-top:15px;}
.order-id{color:#aaa;font-size:14px;}
</style>

</head>

<body>

<nav class="main-navbar">
<a href="/index.html">HOME</a>
<a href="/shop/shop-all.html">SHOP ALL</a>
<a href="/shop/cart.html">CART</a>
</nav>

<div class="claim-container">
<h1>Claim Your Product</h1>

<div class="order-id" id="order-id"></div>

<form id="claim-form">
<input type="email" id="email" placeholder="Email" required>
<input type="password" id="password" placeholder="Password" required>
<button type="submit">Claim & Link Profile</button>
</form>

<div class="success-msg" id="success-msg" style="display:none;"></div>
<div class="error-msg" id="error-msg" style="display:none;"></div>

</div>

<script>
// Get order ID from URL
const params = new URLSearchParams(window.location.search);
const orderId = params.get('order');

document.getElementById('order-id').innerText =
orderId ? 'Order ID: ' + orderId : 'No order detected';

// Submit handler
document.getElementById('claim-form').addEventListener('submit', function(e){
e.preventDefault();

if(!orderId){
showError('Invalid claim link.');
return;
}

const email = document.getElementById('email').value.trim();
const password = document.getElementById('password').value.trim();

// Users storage
let users = JSON.parse(localStorage.getItem('users') || '[]');
let user = users.find(u => u.email === email);

// Create account if new
if(!user){
user = { email, password, points:0, orders:[] };
users.push(user);
}
else if(user.password !== password){
showError('Incorrect password.');
return;
}

// Claims storage
let claims = JSON.parse(localStorage.getItem('claims') || '{}');

if(claims[orderId]){
showError('Order already claimed.');
return;
}

// Save claim
claims[orderId] = { email, points:100 };
localStorage.setItem('claims', JSON.stringify(claims));

// Update user
user.points += 100;
user.orders.push(orderId);

localStorage.setItem('users', JSON.stringify(users));
localStorage.setItem('currentUser', JSON.stringify(user));

showSuccess('Profile linked! 100 points added.');
document.getElementById('claim-form').style.display='none';
});

function showError(msg){
let e=document.getElementById('error-msg');
e.innerText=msg;
e.style.display='block';
}

function showSuccess(msg){
let s=document.getElementById('success-msg');
s.innerText=msg;
  </script>
}
</script>

</body>
</html>
</body>
</html>
